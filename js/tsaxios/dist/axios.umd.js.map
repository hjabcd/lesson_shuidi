{"version":3,"file":"axios.umd.js","sources":["../src/xhr.ts","../src/helpers/url.ts","../src/axios.ts"],"sourcesContent":["import { AxiosRequestConfig } from './type/index';\nexport default function xhr(config: AxiosRequestConfig) {\n  const { url, method = 'GET'} = config;\n  const request = new XMLHttpRequest();\n  request.open(method, url, true);\n  request.send();\n}","function encode(val: string): string {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\nfunction buildURL(url: string, params?: any) {\n  if (!params) return url;\n  const parts: string[] = [];\n  Object.keys(params).forEach(key => {\n    let val = params[key];\n    if (val === null || val === undefined) {\n      return;\n    }\n    let values: string[] = []\n    // 数组\n    if (Array.isArray(val)) {\n      key = key + '[]';\n      values = val;\n    } else {\n      // 数组\n      values = [val];\n    }\n    // 一定是个数组\n    values.forEach((v) => {\n      if (Object.prototype.toString.call(v) === '[object Date]') {\n        // 类型断言 as 我比 ts 更了解 这个是什么类型\n        // 确定一定是 Date\n        v = (v as unknown as Date).toISOString();\n      } else if (Object.prototype.toString.call(v) === '[object Object]') {\n        v = JSON.stringify(v);\n      }\n      parts.push(encode(key) + '=' + encode(v));\n    })\n  })\n  // keywords='海阔天空'\n  // a=1\n  let serializedParams = parts.join('&');\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\nexport {\n  buildURL\n}","import { AxiosRequestConfig} from './type/index';\nimport xhr from './xhr';\nimport { buildURL } from './helpers/url';\n// xmlhttprequest\nfunction axios(config: AxiosRequestConfig) {\n  processConfig(config);\n  xhr(config);\n}\nfunction processConfig(config: AxiosRequestConfig) {\n  // url\n  // data\n  // params\n  config.url = transformUrl(config);\n\n}\nfunction transformUrl(config: AxiosRequestConfig) {\n  return buildURL(config.url, config.params);\n}\nexport default axios;"],"names":[],"mappings":"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"}